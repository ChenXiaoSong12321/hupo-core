{"version":3,"file":"index.js","sources":["../dist-src/index.js"],"sourcesContent":["import axios from 'axios';\nimport { initialize as baseInitialize, defaultConfig, formatParams, pendding, filterResponse, filterError, complete } from '@hupo/core-request-base';\nimport { exit } from '@hupo/core-promise'; // 超时\n\nconst CONFIG = defaultConfig();\nconst CancelToken = axios.CancelToken; // 创建一个 axios 实例\n\nconst service = axios.create(CONFIG); // 请求拦截器\n\nservice.interceptors.request.use(config => {\n  config = formatParams(config);\n  config.cancelToken = new CancelToken(abort => {\n    pendding(config, abort);\n  });\n  return config;\n}); // 响应拦截器\n\nservice.interceptors.response.use(response => filterResponse(response), error => {\n  if (error && error.message !== 'abort') {\n    if (error && error.response) {\n      return filterError(error.response);\n    }\n  }\n\n  return exit(error);\n});\nexport const request = async config => {\n  // setting - 其他配置，例如responseType\n  const {\n    options,\n    data = {},\n    params = {},\n    headers = {},\n    timeout = CONFIG.timeout,\n    setting = {}\n  } = config;\n  const response = await service({\n    method: options.type,\n    url: options.url,\n    headers,\n    params,\n    data,\n    timeout,\n    ...setting\n  });\n  return complete(response, config);\n};\nexport const initialize = baseUrl => {\n  baseInitialize(baseUrl);\n  service.defaults.baseURL = baseUrl;\n};\nexport default request;"],"names":["CONFIG","defaultConfig","CancelToken","axios","service","create","interceptors","request","use","config","formatParams","cancelToken","abort","pendding","response","filterResponse","error","message","filterError","exit","options","data","params","headers","timeout","setting","method","type","url","complete","initialize","baseUrl","baseInitialize","defaults","baseURL"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,MAAMA,MAAM,GAAGC,6BAAa,EAA5B;AACA,MAAMC,WAAW,GAAGC,KAAK,CAACD,WAA1B;;AAEA,MAAME,OAAO,GAAGD,KAAK,CAACE,MAAN,CAAaL,MAAb,CAAhB;;AAEAI,OAAO,CAACE,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiCC,MAAM,IAAI;EACzCA,MAAM,GAAGC,4BAAY,CAACD,MAAD,CAArB;EACAA,MAAM,CAACE,WAAP,GAAqB,IAAIT,WAAJ,CAAgBU,KAAK,IAAI;IAC5CC,wBAAQ,CAACJ,MAAD,EAASG,KAAT,CAAR;GADmB,CAArB;SAGOH,MAAP;CALF;;AAQAL,OAAO,CAACE,YAAR,CAAqBQ,QAArB,CAA8BN,GAA9B,CAAkCM,QAAQ,IAAIC,8BAAc,CAACD,QAAD,CAA5D,EAAwEE,KAAK,IAAI;MAC3EA,KAAK,IAAIA,KAAK,CAACC,OAAN,KAAkB,OAA/B,EAAwC;QAClCD,KAAK,IAAIA,KAAK,CAACF,QAAnB,EAA6B;aACpBI,2BAAW,CAACF,KAAK,CAACF,QAAP,CAAlB;;;;SAIGK,gBAAI,CAACH,KAAD,CAAX;CAPF;AASA,MAAaT,OAAO,GAAG,MAAME,MAAN,IAAgB;;QAE/B;IACJW,OADI;IAEJC,IAAI,GAAG,EAFH;IAGJC,MAAM,GAAG,EAHL;IAIJC,OAAO,GAAG,EAJN;IAKJC,OAAO,GAAGxB,MAAM,CAACwB,OALb;IAMJC,OAAO,GAAG;MACRhB,MAPJ;QAQMK,QAAQ,GAAG,MAAMV,OAAO;IAC5BsB,MAAM,EAAEN,OAAO,CAACO,IADY;IAE5BC,GAAG,EAAER,OAAO,CAACQ,GAFe;IAG5BL,OAH4B;IAI5BD,MAJ4B;IAK5BD,IAL4B;IAM5BG;KACGC,OAPyB,EAA9B;SASOI,wBAAQ,CAACf,QAAD,EAAWL,MAAX,CAAf;CAnBK;AAqBP,MAAaqB,UAAU,GAAGC,OAAO,IAAI;EACnCC,0BAAc,CAACD,OAAD,CAAd;EACA3B,OAAO,CAAC6B,QAAR,CAAiBC,OAAjB,GAA2BH,OAA3B;CAFK;;;;;;"}