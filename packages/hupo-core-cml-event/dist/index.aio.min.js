!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self)["core-cml-event"]={})}(this,function(e){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={}}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(e,[{key:"on",value:function(e,t){"function"==typeof t?(this.events[e]=this.events[e]||[]).push(t):console.error("callback handler must be a function")}},{key:"emit",value:function(e){if(this.events[e]&&0<this.events[e].length){var t=this.events[e];if(t)for(var n=[].slice.call(arguments,1),i=0,o=t.length;i<o;i++)t[i].apply(null,n)}}},{key:"off",value:function(e,t){if(this.events=this.events||{},arguments.length){var n=this.events[e];n&&(1!==arguments.length?(n.splice(n.indexOf(t)>>>0,1),this.events[e]=n):delete this.events[e])}else this.events={}}}]),e}(),n={created:function(){this._event=new t},beforeDestroy:function(){this._off(),delete this._event},methods:{_getCurrentPageComponents:function(e){return this._page._children[e]||[]},_on:function(){var e;(e=this._event).on.apply(e,arguments)},_off:function(){var e;(e=this._event).off.apply(e,arguments)},_emit:function(){var e;(e=this._event).emit.apply(e,arguments)},_broadcast:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._getCurrentPageComponents(e).forEach(function(e){var t;(t=e._event).emit.apply(t,n)})}}},o={methods:{_getCurrentPageComponents:function(e){return this._children[e]||[]},_broadcast:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._getCurrentPageComponents(e).forEach(function(e){var t;(t=e._event).emit.apply(t,n)})}}};e.Event=t,e.componentEventMixin=n,e.pageEventMixin=o,Object.defineProperty(e,"__esModule",{value:!0})});
