{"version":3,"file":"index.js","sources":["../dist-src/Event.js","../dist-src/mixins/component.js","../dist-src/mixins/page.js","../dist-src/index.js"],"sourcesContent":["// event.js\nexport default class Event {\n  constructor() {\n    this.events = {};\n    this.stores = {};\n  }\n\n  on(event, handler) {\n    if (typeof handler != 'function') {\n      console.error('callback handler must be a function');\n      return;\n    }\n\n    (this.events[event] = this.events[event] || []).push(handler);\n\n    if (this.stores[event]) {\n      this.emit(...this.stores[event]);\n    }\n  }\n\n  emit(event) {\n    if (this.events[event] && this.events[event].length > 0) {\n      const events = this.events[event];\n\n      if (events) {\n        const args = [].slice.call(arguments, 1);\n\n        for (let i = 0, len = events.length; i < len; i++) {\n          events[i].apply(null, args);\n        }\n      }\n    }\n  }\n\n  emitCache(...args) {\n    if (args.length) {\n      const event = args[0];\n      this.stores[event] = args;\n      this.emit(...args);\n    }\n  }\n\n  off(event, handler) {\n    this.events = this.events || {}; // all\n\n    if (!arguments.length) {\n      this.events = {};\n      this.stores = {};\n      return;\n    }\n\n    const events = this.events[event];\n    if (!events) return; // remove all handlers\n\n    if (arguments.length === 1) {\n      delete this.events[event];\n      delete this.stores[event];\n      return;\n    } // remove specific handler\n\n\n    events.splice(events.indexOf(handler) >>> 0, 1);\n    this.events[event] = events;\n    return;\n  }\n\n}","import Event from '../Event.js';\nexport default {\n  created() {\n    this._event = new Event();\n  },\n\n  beforeDestroy() {\n    this._off();\n\n    delete this._event;\n  },\n\n  methods: {\n    _getCurrentPageComponents(componentName) {\n      return this._page._children[componentName] || [];\n    },\n\n    _on(event, handler) {\n      this._event.on(event, handler);\n    },\n\n    _off(...arg) {\n      this._event.off(...arg);\n    },\n\n    _emit(...arg) {\n      this._event.emit(...arg);\n    },\n\n    _emitCache(...arg) {\n      this._event.emitCache(...arg);\n    },\n\n    _broadcast(componentName, ...arg) {\n      const components = this._getCurrentPageComponents(componentName);\n\n      components.forEach(item => {\n        item._event.emit(...arg);\n      });\n    }\n\n  }\n};","import Event from '../Event.js';\nexport default {\n  created() {\n    this._event = new Event();\n  },\n\n  beforeDestroy() {\n    this._off();\n\n    delete this._event;\n  },\n\n  methods: {\n    _getCurrentPageComponents(componentName) {\n      return this._children[componentName] || [];\n    },\n\n    _on(event, handler) {\n      this._event.on(event, handler);\n    },\n\n    _off(...arg) {\n      this._event.off(...arg);\n    },\n\n    _emit(...arg) {\n      this._event.emit(...arg);\n    },\n\n    _emitCache(...arg) {\n      this._event.emitCache(...arg);\n    },\n\n    _broadcast(componentName, ...args) {\n      const components = this._getCurrentPageComponents(componentName);\n\n      components.forEach(item => {\n        item._event.emit(...args);\n      });\n    }\n\n  }\n};","import global from '@hupo/core-global';\nexport { default as componentEventMixin } from \"./mixins/component.js\";\nexport { default as pageEventMixin } from \"./mixins/page.js\";\nexport { default as Event } from \"./Event.js\";\nglobal._eventbus = new Event();"],"names":["Event","constructor","events","stores","on","event","handler","console","error","push","emit","length","args","slice","call","arguments","i","len","apply","emitCache","off","splice","indexOf","created","_event","beforeDestroy","_off","methods","_getCurrentPageComponents","componentName","_page","_children","_on","arg","_emit","_emitCache","_broadcast","components","forEach","item","global","_eventbus"],"mappings":"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"}