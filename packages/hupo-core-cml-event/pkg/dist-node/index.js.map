{"version":3,"file":"index.js","sources":["../dist-src/Event.js","../dist-src/mixins/component.js","../dist-src/mixins/page.js"],"sourcesContent":["// event.js\nexport default class Event {\n  constructor() {\n    this.events = {};\n  }\n\n  on(event, handler) {\n    if (typeof handler != 'function') {\n      console.error('callback handler must be a function');\n      return;\n    }\n\n    (this.events[event] = this.events[event] || []).push(handler);\n  }\n\n  emit(event) {\n    if (this.events[event] && this.events[event].length > 0) {\n      const events = this.events[event];\n\n      if (events) {\n        const args = [].slice.call(arguments, 1);\n\n        for (let i = 0, len = events.length; i < len; i++) {\n          events[i].apply(null, args);\n        }\n      }\n    }\n  }\n\n  off(event, handler) {\n    this.events = this.events || {}; // all\n\n    if (!arguments.length) {\n      this.events = {};\n      return;\n    }\n\n    const events = this.events[event];\n    if (!events) return; // remove all handlers\n\n    if (arguments.length === 1) {\n      delete this.events[event];\n      return;\n    } // remove specific handler\n\n\n    events.splice(events.indexOf(handler) >>> 0, 1);\n    this.events[event] = events;\n    return;\n  }\n\n}","import Event from '../Event.js';\nexport default {\n  created() {\n    this._event = new Event();\n  },\n\n  beforeDestroy() {\n    this._off();\n\n    delete this._event;\n  },\n\n  methods: {\n    _getCurrentPageComponents(componentName) {\n      return this._page._children[componentName] || [];\n    },\n\n    _on(...arg) {\n      this._event.on(...arg);\n    },\n\n    _off(...arg) {\n      this._event.off(...arg);\n    },\n\n    _emit(...arg) {\n      this._event.emit(...arg);\n    },\n\n    _broadcast(componentName, ...arg) {\n      const components = this._getCurrentPageComponents(componentName);\n\n      components.forEach(item => {\n        item._event.emit(...arg);\n      });\n    }\n\n  }\n};","export default {\n  methods: {\n    _getCurrentPageComponents(componentName) {\n      return this._children[componentName] || [];\n    },\n\n    _broadcast(componentName, ...arg) {\n      const components = this._getCurrentPageComponents(componentName);\n\n      components.forEach(item => {\n        item._event.emit(...arg);\n      });\n    }\n\n  }\n};"],"names":["Event","constructor","events","on","event","handler","console","error","push","emit","length","args","slice","call","arguments","i","len","apply","off","splice","indexOf","created","_event","beforeDestroy","_off","methods","_getCurrentPageComponents","componentName","_page","_children","_on","arg","_emit","_broadcast","components","forEach","item"],"mappings":"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"}