{"version":3,"file":"index.js","sources":["../dist-src/Event.js","../dist-src/mixins/component.js","../dist-src/mixins/page.js","../dist-src/index.js"],"sourcesContent":["// event.js\nexport default class Event {\n  constructor() {\n    this.events = {};\n    this.stores = {};\n  }\n\n  on(event, handler) {\n    if (typeof handler != 'function') {\n      console.error('callback handler must be a function');\n      return;\n    }\n\n    (this.events[event] = this.events[event] || []).push(handler);\n\n    if (this.stores[event]) {\n      handler(...this.stores[event]);\n    }\n  }\n\n  emit(event) {\n    if (this.events[event] && this.events[event].length > 0) {\n      const events = this.events[event];\n\n      if (events) {\n        const args = [].slice.call(arguments, 1);\n\n        for (let i = 0, len = events.length; i < len; i++) {\n          events[i].apply(null, args);\n        }\n      }\n    }\n  }\n\n  emitCache(event, ...args) {\n    if (args.length) {\n      this.stores[event] = args;\n      this.emit(event, ...args);\n    }\n  }\n\n  off(event, handler) {\n    this.events = this.events || {}; // all\n\n    if (!arguments.length) {\n      this.events = {};\n      this.stores = {};\n      return;\n    }\n\n    if (arguments.length === 1 && this.stores[event]) {\n      delete this.stores[event];\n    }\n\n    const events = this.events[event];\n    if (!events) return; // remove all handlers\n\n    if (arguments.length === 1) {\n      delete this.events[event];\n      return;\n    } // remove specific handler\n\n\n    events.splice(events.indexOf(handler) >>> 0, 1);\n    this.events[event] = events;\n    return;\n  }\n\n}","import Event from '../Event.js';\nexport default {\n  beforeDestroy() {\n    this._off();\n\n    delete this._event;\n  },\n\n  methods: {\n    _getCurrentPageComponents(componentName) {\n      return this._page && this._page._children ? this._page._children[componentName] : [];\n    },\n\n    _on(event, handler) {\n      if (!this._event) this._event = new Event();\n\n      this._event.on(event, handler);\n    },\n\n    _off(...arg) {\n      this._event && this._event.off(...arg);\n    },\n\n    _emit(...arg) {\n      this._event && this._event.emit(...arg);\n    },\n\n    _emitCache(...arg) {\n      this._event && this._event.emitCache(...arg);\n    },\n\n    _broadcast(componentName, ...arg) {\n      const components = this._getCurrentPageComponents(componentName);\n\n      components.forEach(item => {\n        item._event.emit(...arg);\n      });\n    }\n\n  }\n};","import Event from '../Event.js';\nexport default {\n  beforeDestroy() {\n    this._off();\n\n    delete this._event;\n  },\n\n  methods: {\n    _getCurrentPageComponents(componentName) {\n      return this._children[componentName] || [];\n    },\n\n    _on(event, handler) {\n      if (!this._event) this._event = new Event();\n\n      this._event.on(event, handler);\n    },\n\n    _off(...arg) {\n      this._event && this._event.off(...arg);\n    },\n\n    _emit(...arg) {\n      this._event && this._event.emit(...arg);\n    },\n\n    _emitCache(...arg) {\n      this._event && this._event.emitCache(...arg);\n    },\n\n    _broadcast(componentName, ...args) {\n      const components = this._getCurrentPageComponents(componentName);\n\n      components.forEach(item => {\n        item._event.emit(...args);\n      });\n    }\n\n  }\n};","import global from '@hupo/core-global';\nimport Event from \"./Event.js\";\nglobal._eventbus = new Event();\nexport { default as componentEventMixin } from \"./mixins/component.js\";\nexport { default as pageEventMixin } from \"./mixins/page.js\";\nexport { Event };"],"names":["Event","constructor","events","stores","on","event","handler","console","error","push","emit","length","args","slice","call","arguments","i","len","apply","emitCache","off","splice","indexOf","beforeDestroy","_off","_event","methods","_getCurrentPageComponents","componentName","_page","_children","_on","arg","_emit","_emitCache","_broadcast","components","forEach","item","global","_eventbus"],"mappings":"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"}