{"version":3,"file":"index.js","sources":["../dist-src/defaultData.js","../dist-src/index.js"],"sourcesContent":["export default {\n  platform: 'ios',\n  // 操作平台 用于适配胶囊高度\n  capsuleHeight: 40,\n  // 胶囊高度\n  statusBarHeight: 0,\n  // 手机顶部状态栏高度\n  titleHeight: 136,\n  // 整个导航头高度\n  headerHeight: 0,\n  bottomHeight: 0,\n  viewportHeight: 0,\n  // 手机屏幕高度\n  isAllScreen: false,\n  // 是否是全面屏手机\n  isHighHead: false // 是否是刘海屏手机\n\n};","import defaultData from \"./defaultData.js\";\nimport { channelInterface } from '@hupo/core-channel';\n\nconst isAllScreen = () => /iphone/gi.test(window.navigator.userAgent) && window.screen.height >= 812;\n\nasync function calculate(cml) {\n  const data = JSON.parse(JSON.stringify(defaultData));\n  const system = await cml.getSystemInfo();\n  data.viewportWidth = parseInt(system.viewportWidth);\n  data.viewportHeight = parseInt(system.viewportHeight);\n  channelInterface({\n    H5() {\n      if (isAllScreen()) data.isAllScreen = true;\n    },\n\n    WX_H5() {\n      if (isAllScreen()) data.isAllScreen = true;\n      data.capsuleHeight = 0;\n    },\n\n    WX_MINI_PROGRAM() {\n      if (system.extraParams.platform == 'devtools') {\n        data.capsuleHeight = 44;\n      } else if (system.os == 'android') {\n        data.capsuleHeight = 48;\n      }\n\n      data.statusBarHeight = system.extraParams.statusBarHeight;\n      if (system.extraParams.screenHeight - data.statusBarHeight > 750 && system.os != 'android') data.isAllScreen = true;\n    }\n\n  });\n  data.titleHeight = data.capsuleHeight + data.statusBarHeight;\n\n  if (data.statusBarHeight >= 44) {\n    data.isHighHead = true;\n  }\n\n  data.headerHeight = data.statusBarHeight + data.capsuleHeight; // 全面屏 底部留空距离 34px\n\n  data.bottomHeight = data.isAllScreen ? 34 : 0;\n  return data;\n}\n\nexport default (cml => promise.cache('calculate', calculate(cml)));"],"names":["platform","capsuleHeight","statusBarHeight","titleHeight","headerHeight","bottomHeight","viewportHeight","isAllScreen","isHighHead","test","window","navigator","userAgent","screen","height","calculate","cml","data","JSON","parse","stringify","defaultData","system","getSystemInfo","viewportWidth","parseInt","channelInterface","H5","WX_H5","WX_MINI_PROGRAM","extraParams","os","screenHeight","promise","cache"],"mappings":";;;;;;AAAA,kBAAe;EACbA,QAAQ,EAAE,KADG;;EAGbC,aAAa,EAAE,EAHF;;EAKbC,eAAe,EAAE,CALJ;;EAObC,WAAW,EAAE,GAPA;;EASbC,YAAY,EAAE,CATD;EAUbC,YAAY,EAAE,CAVD;EAWbC,cAAc,EAAE,CAXH;;EAabC,WAAW,EAAE,KAbA;;EAebC,UAAU,EAAE,KAfC;;CAAf;;ACGA,MAAMD,WAAW,GAAG,MAAM,WAAWE,IAAX,CAAgBC,MAAM,CAACC,SAAP,CAAiBC,SAAjC,KAA+CF,MAAM,CAACG,MAAP,CAAcC,MAAd,IAAwB,GAAjG;;AAEA,eAAeC,SAAf,CAAyBC,GAAzB,EAA8B;QACtBC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeC,WAAf,CAAX,CAAb;QACMC,MAAM,GAAG,MAAMN,GAAG,CAACO,aAAJ,EAArB;EACAN,IAAI,CAACO,aAAL,GAAqBC,QAAQ,CAACH,MAAM,CAACE,aAAR,CAA7B;EACAP,IAAI,CAACX,cAAL,GAAsBmB,QAAQ,CAACH,MAAM,CAAChB,cAAR,CAA9B;EACAoB,4BAAgB,CAAC;IACfC,EAAE,GAAG;UACCpB,WAAW,EAAf,EAAmBU,IAAI,CAACV,WAAL,GAAmB,IAAnB;KAFN;;IAKfqB,KAAK,GAAG;UACFrB,WAAW,EAAf,EAAmBU,IAAI,CAACV,WAAL,GAAmB,IAAnB;MACnBU,IAAI,CAAChB,aAAL,GAAqB,CAArB;KAPa;;IAUf4B,eAAe,GAAG;UACZP,MAAM,CAACQ,WAAP,CAAmB9B,QAAnB,IAA+B,UAAnC,EAA+C;QAC7CiB,IAAI,CAAChB,aAAL,GAAqB,EAArB;OADF,MAEO,IAAIqB,MAAM,CAACS,EAAP,IAAa,SAAjB,EAA4B;QACjCd,IAAI,CAAChB,aAAL,GAAqB,EAArB;;;MAGFgB,IAAI,CAACf,eAAL,GAAuBoB,MAAM,CAACQ,WAAP,CAAmB5B,eAA1C;UACIoB,MAAM,CAACQ,WAAP,CAAmBE,YAAnB,GAAkCf,IAAI,CAACf,eAAvC,GAAyD,GAAzD,IAAgEoB,MAAM,CAACS,EAAP,IAAa,SAAjF,EAA4Fd,IAAI,CAACV,WAAL,GAAmB,IAAnB;;;GAlBhF,CAAhB;EAsBAU,IAAI,CAACd,WAAL,GAAmBc,IAAI,CAAChB,aAAL,GAAqBgB,IAAI,CAACf,eAA7C;;MAEIe,IAAI,CAACf,eAAL,IAAwB,EAA5B,EAAgC;IAC9Be,IAAI,CAACT,UAAL,GAAkB,IAAlB;;;EAGFS,IAAI,CAACb,YAAL,GAAoBa,IAAI,CAACf,eAAL,GAAuBe,IAAI,CAAChB,aAAhD,CAjC4B;;EAmC5BgB,IAAI,CAACZ,YAAL,GAAoBY,IAAI,CAACV,WAAL,GAAmB,EAAnB,GAAwB,CAA5C;SACOU,IAAP;;;AAGF,aAAgBD,GAAG,IAAIiB,OAAO,CAACC,KAAR,CAAc,WAAd,EAA2BnB,SAAS,CAACC,GAAD,CAApC,CAAvB;;;;"}