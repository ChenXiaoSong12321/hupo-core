{"version":3,"file":"index.js","sources":["../dist-src/index.js"],"sourcesContent":["import { initialize as baseInitialize, defaultConfig, formatParams, pendding, filterResponse, filterError, complete } from '@hupo/core-request-base'; // 超时\n\nconst CONFIG = defaultConfig();\nlet base_url = '';\nexport const request = async _config => {\n  if (typeof wx !== 'undefined') {\n    return new Promise((resolve, reject) => {\n      const {\n        options,\n        data = {},\n        params = {},\n        headers = CONFIG.headers\n      } = _config;\n      let config = {\n        method: options.type,\n        url: `${base_url}${options.url}`,\n        header: headers,\n        params,\n        data\n      };\n      config = formatParams(config);\n      const request = wx.request({ ...config,\n\n        success(response) {\n          response.config = config;\n          response.status = response.statusCode;\n          filterError(response);\n          response = filterResponse(response);\n          const data = complete(response, _config);\n          resolve(data);\n        },\n\n        fail(error) {\n          reject(error);\n        }\n\n      });\n      pendding(config, () => request.abort());\n    });\n  }\n};\nexport const initialize = baseUrl => {\n  baseInitialize(baseUrl);\n  base_url = baseUrl;\n};\nexport default request;"],"names":["CONFIG","defaultConfig","base_url","request","_config","wx","Promise","resolve","reject","options","data","params","headers","config","method","type","url","header","formatParams","success","response","status","statusCode","filterError","filterResponse","complete","fail","error","pendding","abort","initialize","baseUrl","baseInitialize"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,MAAMA,MAAM,GAAGC,6BAAa,EAA5B;AACA,IAAIC,QAAQ,GAAG,EAAf;AACA,MAAaC,OAAO,GAAG,MAAMC,OAAN,IAAiB;MAClC,OAAOC,EAAP,KAAc,WAAlB,EAA+B;WACtB,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;YAChC;QACJC,OADI;QAEJC,IAAI,GAAG,EAFH;QAGJC,MAAM,GAAG,EAHL;QAIJC,OAAO,GAAGZ,MAAM,CAACY;UACfR,OALJ;UAMIS,MAAM,GAAG;QACXC,MAAM,EAAEL,OAAO,CAACM,IADL;QAEXC,GAAG,EAAG,GAAEd,QAAS,GAAEO,OAAO,CAACO,GAAI,EAFpB;QAGXC,MAAM,EAAEL,OAHG;QAIXD,MAJW;QAKXD;OALF;MAOAG,MAAM,GAAGK,4BAAY,CAACL,MAAD,CAArB;YACMV,OAAO,GAAGE,EAAE,CAACF,OAAH,oBAAgBU,MAAhB;QAEdM,OAAO,CAACC,QAAD,EAAW;UAChBA,QAAQ,CAACP,MAAT,GAAkBA,MAAlB;UACAO,QAAQ,CAACC,MAAT,GAAkBD,QAAQ,CAACE,UAA3B;UACAC,2BAAW,CAACH,QAAD,CAAX;UACAA,QAAQ,GAAGI,8BAAc,CAACJ,QAAD,CAAzB;gBACMV,IAAI,GAAGe,wBAAQ,CAACL,QAAD,EAAWhB,OAAX,CAArB;UACAG,OAAO,CAACG,IAAD,CAAP;SARY;;QAWdgB,IAAI,CAACC,KAAD,EAAQ;UACVnB,MAAM,CAACmB,KAAD,CAAN;;;SAZJ;MAgBAC,wBAAQ,CAACf,MAAD,EAAS,MAAMV,OAAO,CAAC0B,KAAR,EAAf,CAAR;KA/BK,CAAP;;CAFG;AAqCP,MAAaC,UAAU,GAAGC,OAAO,IAAI;EACnCC,0BAAc,CAACD,OAAD,CAAd;EACA7B,QAAQ,GAAG6B,OAAX;CAFK;;;;;;"}