{"version":3,"file":"index.js","sources":["../dist-src/index.js"],"sourcesContent":["import loadScript from \"@hupo/core-load-script-web\";\nlet isWx = typeof wx !== 'undefined';\nconst isH5 = typeof window !== 'undefined';\n\nconst isWechat = () => window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i) === 'micromessenger';\n\nexport const WX_H5 = 'WX_H5';\nexport const H5 = 'H5';\nexport const WX_MINI_PROGRAM = 'WX_MINI_PROGRAM';\n\nfunction calc() {\n  if (isH5 && (isWx || isWechat())) {\n    // 没有wx对象，需要添加weixin js sdk\n    if (!isWx) {\n      loadScript('https://res2.wx.qq.com/open/js/jweixin-1.4.0.js').then(() => {\n        // 加载完重新复制isWx\n        isWx = typeof wx !== 'undefined';\n      });\n    }\n\n    return WX_H5;\n  } else if (isWx) {\n    return WX_MINI_PROGRAM;\n  } else if (isH5) {\n    return H5;\n  } else {\n    // default 小程序\n    return WX_MINI_PROGRAM;\n  }\n}\n\nexport const channel = calc();\nexport const channelInterface = callback => callback[channel] && callback[channel]();"],"names":["isWx","wx","isH5","window","isWechat","navigator","userAgent","toLowerCase","match","WX_H5","H5","WX_MINI_PROGRAM","calc","loadScript","then","channel","channelInterface","callback"],"mappings":";;;;;;;;AACA,IAAIA,IAAI,GAAG,OAAOC,EAAP,KAAc,WAAzB;AACA,MAAMC,IAAI,GAAG,OAAOC,MAAP,KAAkB,WAA/B;;AAEA,MAAMC,QAAQ,GAAG,MAAMD,MAAM,CAACE,SAAP,CAAiBC,SAAjB,CAA2BC,WAA3B,GAAyCC,KAAzC,CAA+C,iBAA/C,MAAsE,gBAA7F;;AAEA,MAAaC,KAAK,GAAG,OAAd;AACP,MAAaC,EAAE,GAAG,IAAX;AACP,MAAaC,eAAe,GAAG,iBAAxB;;AAEP,SAASC,IAAT,GAAgB;MACVV,IAAI,KAAKF,IAAI,IAAII,QAAQ,EAArB,CAAR,EAAkC;;QAE5B,CAACJ,IAAL,EAAW;MACTa,UAAU,CAAC,iDAAD,CAAV,CAA8DC,IAA9D,CAAmE,MAAM;;QAEvEd,IAAI,GAAG,OAAOC,EAAP,KAAc,WAArB;OAFF;;;WAMKQ,KAAP;GATF,MAUO,IAAIT,IAAJ,EAAU;WACRW,eAAP;GADK,MAEA,IAAIT,IAAJ,EAAU;WACRQ,EAAP;GADK,MAEA;;WAEEC,eAAP;;;;AAIJ,MAAaI,OAAO,GAAGH,IAAI,EAApB;AACP,MAAaI,gBAAgB,GAAGC,QAAQ,IAAIA,QAAQ,CAACF,OAAD,CAAR,IAAqBE,QAAQ,CAACF,OAAD,CAAR,EAA1D;;;;;;;;"}