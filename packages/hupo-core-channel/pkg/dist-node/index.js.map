{"version":3,"file":"index.js","sources":["../dist-src/index.js"],"sourcesContent":["const isWx = typeof wx !== 'undefined';\nconst isH5 = typeof window !== 'undefined';\n\nconst isWechat = () => window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i) == 'micromessenger';\n\nconst WX_H5 = 'WX_H5';\nconst H5 = 'H5';\nconst WX_MINI_PROGRAM = 'WX_MINI_PROGRAM';\n\nfunction calc() {\n  if (isH5 && isWechat()) {\n    // 没有wx对象，需要添加weixin js sdk\n    if (!isWx) {\n      // #ifdef H5\n      const loadScript = require('@hupo/core-load-script-web');\n\n      loadScript('https://res2.wx.qq.com/open/js/jweixin-1.4.0.js'); // #endif\n    }\n\n    return WX_H5;\n  } else if (isWx) {\n    return WX_MINI_PROGRAM;\n  } else if (isH5) {\n    return H5;\n  } else {\n    // default 小程序\n    return WX_MINI_PROGRAM;\n  }\n}\n\nexport const channels = {\n  WX_H5,\n  H5,\n  WX_MINI_PROGRAM\n};\nexport const channel = calc(); // 暂时保留，后续可能删掉 todo\n\nexport const channelInterface = callback => callback[channel] && callback[channel]();"],"names":["isWx","wx","isH5","window","isWechat","navigator","userAgent","toLowerCase","match","WX_H5","H5","WX_MINI_PROGRAM","calc","loadScript","require","channels","channel","channelInterface","callback"],"mappings":";;;;AAAA,MAAMA,IAAI,GAAG,OAAOC,EAAP,KAAc,WAA3B;AACA,MAAMC,IAAI,GAAG,OAAOC,MAAP,KAAkB,WAA/B;;AAEA,MAAMC,QAAQ,GAAG,MAAMD,MAAM,CAACE,SAAP,CAAiBC,SAAjB,CAA2BC,WAA3B,GAAyCC,KAAzC,CAA+C,iBAA/C,KAAqE,gBAA5F;;AAEA,MAAMC,KAAK,GAAG,OAAd;AACA,MAAMC,EAAE,GAAG,IAAX;AACA,MAAMC,eAAe,GAAG,iBAAxB;;AAEA,SAASC,IAAT,GAAgB;MACVV,IAAI,IAAIE,QAAQ,EAApB,EAAwB;;QAElB,CAACJ,IAAL,EAAW;;YAEHa,UAAU,GAAGC,OAAO,CAAC,4BAAD,CAA1B;;MAEAD,UAAU,CAAC,iDAAD,CAAV,CAJS;;;WAOJJ,KAAP;GATF,MAUO,IAAIT,IAAJ,EAAU;WACRW,eAAP;GADK,MAEA,IAAIT,IAAJ,EAAU;WACRQ,EAAP;GADK,MAEA;;WAEEC,eAAP;;;;AAIJ,MAAaI,QAAQ,GAAG;EACtBN,KADsB;EAEtBC,EAFsB;EAGtBC;CAHK;AAKP,MAAaK,OAAO,GAAGJ,IAAI,EAApB;;AAEP,MAAaK,gBAAgB,GAAGC,QAAQ,IAAIA,QAAQ,CAACF,OAAD,CAAR,IAAqBE,QAAQ,CAACF,OAAD,CAAR,EAA1D;;;;;;"}