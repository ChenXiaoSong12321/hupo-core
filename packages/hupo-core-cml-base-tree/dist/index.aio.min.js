!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self)["core-cml-base-tree"]={})}(this,function(e){"use strict";var n="undefined"==typeof window?(global.$mall||(global.$mall={}),global.$mall):(window.$mall||(window.$mall={}),window.$mall);function t(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function a(e){return e.__wxWebviewId__||e._uid}function r(e){return e.__cml_originOptions__?e.__cml_originOptions__.componentName:e.$options.componentName}var o=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}return function(e,n,o){n&&t(e.prototype,n),o&&t(e,o)}(e,[{key:"initialize",value:function(){this.pages={}}},{key:"addPage",value:function(e){var n=a(e);e._children={},this.pages[n]||(this.pages[n]=e)}},{key:"removePage",value:function(e){var n=a(e);delete this.pages[n]}},{key:"addComponent",value:function(e){var n=r(e);if(n){var o=e.$route?e.$route.matched[0].instances.default:e,t=a(o),i=this.pages[t];i._children[n]||(i._children[n]=[]),i._children[n].push(e),e._page=i}else console.warn("you have to add componentName of component",e)}},{key:"removeComponent",value:function(e){var n=r(e);if(n){var o=a(e._page),t=this.pages[o];t&&t._children[n]&&t._children[n].splice(t._children[n].indexOf(e)>>>0,1)}else console.warn("you have to add componentName of component",e)}}]),e}(),i={created:function(){n._baseTree.addComponent(this)},beforeDestroy:function(){n._baseTree.removeComponent(this)}},l={created:function(){n._baseTree.addPage(this)},beforeDestroy:function(){n._baseTree.removePage(this)}};n._baseTree=new o,e.componentBaseTreeMixin=i,e.pageBaseTreeMixin=l,Object.defineProperty(e,"__esModule",{value:!0})});
