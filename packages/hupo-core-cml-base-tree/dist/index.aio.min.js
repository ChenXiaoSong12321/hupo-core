!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self)["core-cml-base-tree"]={})}(this,function(e){"use strict";var n="undefined"==typeof window?(global.$mall||(global.$mall={}),global.$mall):(window.$mall||(window.$mall={}),window.$mall);function i(e,n){for(var o=0;o<n.length;o++){var i=n[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e){return e.__wxWebviewId__||e._uid}function r(e){return e.__cml_originOptions__?e.__cml_originOptions__.name:e.$options.name}var o=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}return function(e,n,o){n&&i(e.prototype,n),o&&i(e,o)}(e,[{key:"initialize",value:function(){this.pages={}}},{key:"addPage",value:function(e){var n=a(e);e._children={},this.pages[n]||(this.pages[n]=e)}},{key:"removePage",value:function(e){var n=a(e);delete this.pages[n]}},{key:"addComponent",value:function(e){var n=r(e);if(n){var o=e.$route?e.$route.matched[0].instances.default:e,i=a(o),t=this.pages[i];t._children[n]||(t._children[n]=[]),t._children[n].push(e),e._page=t}else console.warn("you have to add name of component",e)}},{key:"removeComponent",value:function(e){var n=r(e);if(n){var o=a(e._page),i=this.pages[o];i&&i._children[n]&&i._children[n].splice(i._children[n].indexOf(e)>>>0,1)}else console.warn("you have to add name of component",e)}}]),e}(),t={mounted:function(){n._baseTree.addComponent(this)},beforeDestroy:function(){n._baseTree.removeComponent(this)}},l={beforeCreate:function(){n._baseTree.addPage(this)},beforeDestroy:function(){n._baseTree.removePage(this)}};n._baseTree=new o,e.componentBaseTreeMixin=t,e.pageBaseTreeMixin=l,Object.defineProperty(e,"__esModule",{value:!0})});
